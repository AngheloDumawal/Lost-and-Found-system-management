<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin - Lost and Found (Beginner Version)</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    table { width: 100%; border-collapse: collapse; margin-bottom: 30px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    button { padding: 5px 10px; margin: 2px; border: none; border-radius: 5px; cursor: pointer; }
    .found { background-color: green; color: white; }
    .notfound { background-color: red; color: white; }
    .delete { background-color: gray; color: white; }
    .dropdown { width: 100%; padding: 4px; }
  </style>
</head>
<body>
  <h1>Admin - Lost and Found</h1>

  <h2>Lost Items</h2>
  <table>
    <thead>
      <tr>
        <th>Student Name</th>
        <th>Student Number</th>
        <th>Department</th>
        <th>Grade & Section</th>
        <th>Item Name</th>
        <th>Description</th>
        <th>Contact Info</th>
        <th>Date</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody id="lostTable"></tbody>
  </table>

  <h2>History (Found / Not Found)</h2>
  <table>
    <thead>
      <tr>
        <th>Student Name</th>
        <th>Student Number</th>
        <th>Department</th>
        <th>Grade & Section</th>
        <th>Item Name</th>
        <th>Description</th>
        <th>Contact Info</th>
        <th>Date</th>
        <th>Status</th>
        <th>Delete</th>
      </tr>
    </thead>
    <tbody id="historyTable"></tbody>
  </table>

  <script>
    // Load data from localStorage or empty array
    let lostItems = JSON.parse(localStorage.getItem('lostItems')) || [];
    let historyItems = JSON.parse(localStorage.getItem('historyItems')) || [];

    const lostTable = document.getElementById('lostTable');
    const historyTable = document.getElementById('historyTable');

    // Show all lost and history items
    function showItems() {
      lostTable.innerHTML = "";
      historyTable.innerHTML = "";

      // Lost Items
      lostItems.forEach((item) => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td><input type="text" value="${item.studentName}" onchange="editItem(${item.id}, 'studentName', this.value)"></td>
          <td><input type="text" value="${item.studentNumber}" onchange="editItem(${item.id}, 'studentNumber', this.value)"></td>
          <td>
            <select class="dropdown" onchange="editItem(${item.id}, 'department', this.value)">
              <option value="College Department" ${item.department === 'College Department' ? 'selected' : ''}>College Department</option>
              <option value="SHS Department" ${item.department === 'SHS Department' ? 'selected' : ''}>SHS Department</option>
              <option value="Grade School Department" ${item.department === 'Grade School Department' ? 'selected' : ''}>Grade School Department</option>
            </select>
          </td>
          <td><input type="text" value="${item.gradeSection}" onchange="editItem(${item.id}, 'gradeSection', this.value)"></td>
          <td><input type="text" value="${item.itemName}" onchange="editItem(${item.id}, 'itemName', this.value)"></td>
          <td><input type="text" value="${item.description}" onchange="editItem(${item.id}, 'description', this.value)"></td>
          <td><input type="text" value="${item.contact}" onchange="editItem(${item.id}, 'contact', this.value)"></td>
          <td>${item.date}</td>
          <td>
            <button class="found" onclick="markAsFound(${item.id})">Found</button>
            <button class="notfound" onclick="markAsNotFound(${item.id})">Not Found</button>
          </td>
        `;
        lostTable.appendChild(row);
      });

      // History Items
      historyItems.forEach((item) => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${item.studentName}</td>
          <td>${item.studentNumber}</td>
          <td>${item.department}</td>
          <td>${item.gradeSection}</td>
          <td>${item.itemName}</td>
          <td>${item.description}</td>
          <td>${item.contact}</td>
          <td>${item.date}</td>
          <td style="color:${item.status === 'Not Found' ? 'red' : 'green'}">${item.status}</td>
          <td><button class="delete" onclick="deleteHistory(${item.id})">Delete</button></td>
        `;
        historyTable.appendChild(row);
      });
    }

    // Update Lost Item
    function editItem(id, field, value) {
      const index = lostItems.findIndex(item => item.id === id);
      if (index > -1) {
        lostItems[index][field] = value;
        saveData();
      }
    }

    // Mark as Found
    function markAsFound(id) {
      const index = lostItems.findIndex(item => item.id === id);
      if (index > -1) {
        const foundItem = lostItems.splice(index, 1)[0];
        foundItem.status = "Found";
        foundItem.date = new Date().toLocaleString();
        historyItems.push(foundItem);
        saveData();
      }
    }

    // Mark as Not Found
    function markAsNotFound(id) {
      const index = lostItems.findIndex(item => item.id === id);
      if (index > -1) {
        const notFoundItem = lostItems.splice(index, 1)[0];
        notFoundItem.status = "Not Found";
        notFoundItem.date = new Date().toLocaleString();
        historyItems.push(notFoundItem);
        saveData();
      }
    }

    // Delete from History
    function deleteHistory(id) {
      historyItems = historyItems.filter(item => item.id !== id);
      saveData();
    }

    // Save data to localStorage
    function saveData() {
      localStorage.setItem('lostItems', JSON.stringify(lostItems));
      localStorage.setItem('historyItems', JSON.stringify(historyItems));
      showItems();
    }

    // Example data (only for demo)
    if (lostItems.length === 0) {
      lostItems = [
        { id: 1, studentName: "John Doe", studentNumber: "13-2493", department: "Room  no. Floor no.", gradeSection: "BSIT 2E", itemName: "", description: "", contact: "091234567891", date: "2025/0/0" }
      ];
      saveData();
    }

    showItems();
  </script>
</body>
</html>

